% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fun_pdp_plot.R
\name{fun_pdp_plot}
\alias{fun_pdp_plot}
\title{Create Partial Dependence Plot with Individual Conditional Expectation Lines}
\usage{
fun_pdp_plot(
  pdp_list,
  x_var,
  borders = NULL,
  category_colors = NULL,
  category_alpha = 0.5,
  category_names = NULL,
  title = "Partial Dependence Plot with Individual Conditional Expectation Lines",
  subtitle = "Background colors show category mapping",
  ice_alpha = 0.4,
  ice_color = "purple",
  ice_linewidth = 0.7,
  pdp_color = "black",
  pdp_linewidth = 1.5,
  ridgeline_scale = 0.8,
  ridgeline_alpha = 0.7
)
}
\arguments{
\item{pdp_list}{A list containing ICE and PDP data, typically the output from 
\code{fun_pdp_data()}. Must contain elements \code{ice_data} and \code{pdp_data}.}

\item{x_var}{Character string specifying the name of the predictor variable to plot.}

\item{borders}{Numeric vector of category borders for continuous variables. 
If NULL, no background category mapping is shown. Default is NULL.}

\item{category_colors}{Character vector of colors for category backgrounds. 
Default is c('#4DAF4A', '#377EB8', '#FFFF33', '#FF7F00', '#E41A1C').}

\item{category_names}{Character vector of category names for the legend. 
Default is c("very american", "american", "neutral", "british", "very british").}

\item{title}{Character string for the plot title. Default is "Partial Dependence 
Plot with Individual Conditional Expectation Lines".}

\item{subtitle}{Character string for the plot subtitle. Default is "Background 
colors show category mapping".}

\item{ice_alpha}{Numeric value between 0 and 1 for ICE line transparency. 
Default is 0.4.}

\item{ice_color}{Character string specifying the color of ICE lines. Default is "purple".}

\item{ice_linewidth}{Numeric value for the width of ICE lines. Default is 0.7.}

\item{pdp_color}{Character string specifying the color of the PDP mean line and points. 
Default is "black".}

\item{pdp_linewidth}{Numeric value for the width of the PDP mean line. Default is 1.5.}

\item{ridgeline_scale}{Numeric value controlling the height scaling of ridgeline 
plots for categorical variables. Default is 0.8.}

\item{ridgeline_alpha}{Numeric value between 0 and 1 for ridgeline transparency 
in categorical plots. Default is 0.7.}
}
\value{
A ggplot object containing the partial dependence plot.
}
\description{
This function creates partial dependence plots (PDP) with individual conditional 
expectation (ICE) lines. It automatically detects whether the predictor variable 
is continuous or categorical and creates appropriate visualizations. For continuous 
variables, it shows ICE lines with optional category background mapping. For 
categorical variables, it creates ridgeline plots showing the distribution of 
predictions for each category.
}
\details{
The function automatically detects the variable type:
\itemize{
  \item \strong{Categorical treatment}: Variables are treated as categorical if they are 
    factors, characters, or have 4 or fewer unique values. A warning is displayed 
    when numeric variables are treated as categorical due to having few unique values.
  \item \strong{Continuous variables}: Creates a traditional PDP with ICE lines, 
    PDP mean line, and optional category background mapping using the \code{borders} parameter.
  \item \strong{Categorical variables}: Creates ridgeline plots showing the 
    distribution of ICE predictions for each category level, with PDP mean points.
}
}
\examples{
\dontrun{
# Assuming you have trained a model and prepared data
pdp_result <- fun_pdp_data(
  data = dm_train_dummy, 
  fit = rf_ord_dummy$ranger.fit,
  response = "score",
  vars = c("item01"),
  gridSize = 250,
  nIce = 20
)

# Create plot for continuous variable with category mapping
plot_continuous <- fun_pdp_plot(
  pdp_result, 
  x_var = "item01",
  borders = rf_ord$category.borders,
  category_colors = c('#4DAF4A', '#377EB8', '#FFFF33', '#FF7F00', '#E41A1C'),
  category_names = c("very american", "american", "neutral", "british", "very british")
)

# Create plot for categorical variable (ridgeline plot)
plot_categorical <- fun_pdp_plot(
  pdp_result_cat, 
  x_var = "factor_variable"
)

print(plot_continuous)
}

}
\seealso{
\code{\link{fun_pdp_data}} for generating the input data
}
\author{
Your Name
}
